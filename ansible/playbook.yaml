---
- name: Installing python3 and docker
  hosts: all
  become: yes
  tasks:
  - name: Installing python3 and docker
    vars:
      ansible_python_interpreter: /usr/bin/python
    yum:
      name:
        - python3
        - docker
      update_cache: yes
      state: present

- name: start docker daemond
  hosts: all
  become: true
  tasks:
  - name: Starting docker daemond
    systemd: 
      name: docker 
      state: started

- name: change sock perm
  hosts: all
  become: true
  tasks:
  - name: change sock perm
    command: chmod 666 /var/run/docker.sock                    


- name: Running docker image
  hosts: all
  become: true
  tasks:
  - name: Running docker image
    command: docker run -d -p 8080:8080 esso4real/python-app              